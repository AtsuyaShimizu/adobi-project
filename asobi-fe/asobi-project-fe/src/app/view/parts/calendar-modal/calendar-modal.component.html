<div class="calendar-modal" (click)="close.emit()">
  <div class="dialog" role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
    <div class="header">
      <img src="calendar.svg" alt="" class="header-icon" />
      <h2 class="title">日付選択</h2>
      <button class="close-btn" (click)="close.emit()" aria-label="閉じる">
        <img src="add.svg" alt="" class="close-icon" />
      </button>
    </div>
    <div class="calendar">
      <div class="month-nav">
        <button
          class="nav"
          type="button"
          aria-label="前の月へ"
          (click)="prevMonth()"
        >
          &#x2039;
        </button>
        <span class="title">{{ displayDate | date: 'y年M月' }}</span>
        <button
          class="nav"
          type="button"
          aria-label="次の月へ"
          (click)="nextMonth()"
        >
          &#x203A;
        </button>
      </div>
      <table>
        <thead>
          <tr>
            @for (day of ['日', '月', '火', '水', '木', '金', '土']; track day) {
              <th>{{ day }}</th>
            }
          </tr>
        </thead>
        <tbody>
          @for (week of weeks; track $index) {
            <tr>
              @for (day of week; track day.getTime()) {
                <td
                  (click)="select(day)"
                  [class.other-month]="!isCurrentMonth(day)"
                  [class.selected]="isSelected(day)"
                  [class.today]="isToday(day)"
                  [class.weekend]="isWeekend(day)"
                  [attr.aria-current]="isToday(day) ? 'date' : null"
                >
                  <span class="cell">{{ day.getDate() }}</span>
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    </div>
    <div class="actions">
      <button class="confirm" (click)="submit()">決定</button>
    </div>
  </div>
</div>
